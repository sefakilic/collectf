{% extends "base.html" %}

{% block content %}
{% load get_item %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
google.setOnLoadCallback(drawChart2);
function drawChart() {
    var data = google.visualization.arrayToDataTable([
	['species', {% for tf in TFs %} '{{ tf }}', {% endfor %}],
	{% for sp in species %}
	['{{ sp }}', {% for tf in TFs %} {{ curation_stats|get_item:tf|get_item:sp }}, {% endfor %}],
	{% endfor %}
    ]);
    var options = {
        title: 'CollecTF curation number by TF and species',
        vAxis: {title: 'Species'},
	hAxis: {title: 'Number of curations'},
	height: 1500, width: 1000,
	isStacked: true,
    };
    var chart = new google.visualization.BarChart(document.getElementById('num_curations_div'));
    chart.draw(data, options);
}

function drawChart2() {
    var data = google.visualization.arrayToDataTable([
	['species', {% for tf in TFs %} '{{ tf }}', {% endfor %}],
	{% for sp in species %}
	['{{ sp }}', {% for tf in TFs %} {{ curation_stats2|get_item:tf|get_item:sp }}, {% endfor %}],
	{% endfor %}
    ]);
    var options = {
	title: 'CollecTF reported TFBS by TF and species',
	vAxis: {title: 'Species'},
	hAxis: {title: 'Number of sites'},
	height: 1500, width: 1000,
	isStacked: true,
    };
    var chart = new google.visualization.BarChart(document.getElementById('num_sites_div'));
    chart.draw(data, options);
}
 
</script>

<h2>Number of curations by TF and species</h2>
<div id="num_curations_div"></div>

<h2>Number of reported sites by TF and species</h2>
<div id="num_sites_div"></div>

{% endblock %}
